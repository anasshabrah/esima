// Add these fields to your User model
model User {
  // ... existing fields
  
  // Add these new fields
  isAdmin        Boolean       @default(false)
  role           String        @default("user") // "user" or "admin"
  
  // ... rest of your model
}

// Add this model for audit logging
model AdminAuditLog {
  id          Int       @id @default(autoincrement())
  userId      Int?
  user        User?     @relation(fields: [userId], references: [id])
  action      String    // "create", "update", "delete", "login", etc.
  entityType  String    // "user", "order", "bundle", etc.
  entityId    String?   // ID of the affected entity
  details     String?   // JSON string with details of the action
  ipAddress   String?
  userAgent   String?
  createdAt   DateTime  @default(now())

  @@index([userId])
  @@index([action])
  @@index([entityType])
  @@index([createdAt])
}

// Add this model for system settings
model SystemSettings {
  id                      Int       @id @default(autoincrement())
  siteName                String
  siteDescription         String?
  contactEmail            String
  supportEmail            String
  defaultCurrency         String    @default("USD")
  referralCommissionPercent Float   @default(10)
  maintenanceMode         Boolean   @default(false)
  termsUrl                String?
  privacyUrl              String?
  updatedAt               DateTime  @updatedAt
  updatedById             Int?
  updatedBy               User?     @relation(fields: [updatedById], references: [id])

  @@index([updatedById])
}

// Add this model for payment settings
model PaymentSettings {
  id                      Int       @id @default(autoincrement())
  minimumWithdrawalAmount Float     @default(50)
  updatedAt               DateTime  @updatedAt
  updatedById             Int?
  updatedBy               User?     @relation(fields: [updatedById], references: [id])
  paymentMethods          PaymentMethod[]

  @@index([updatedById])
}

model PaymentMethod {
  id                      Int       @id @default(autoincrement())
  name                    String
  isEnabled               Boolean   @default(true)
  processingFee           Float     @default(0)
  instructions            String?
  paymentSettingsId       Int
  paymentSettings         PaymentSettings @relation(fields: [paymentSettingsId], references: [id], onDelete: Cascade)

  @@index([paymentSettingsId])
}
